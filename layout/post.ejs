<link rel="stylesheet" href="/css/post-body.css">
<link rel="stylesheet" href="/css/gitalk.min.css">
<script src="/js/gitalk.min.js"></script>
<div class="article">
    <div>
        <h1><%= page.title %> </h1>
    </div>

    <div class="info">
        <span class="date">
            <ion-icon name="calendar-outline"></ion-icon>
            <%- date(page.date, 'YYYY/M/D') %>
        </span>

        <% if(page.categories && page.categories.data.length!=0){ %>
        <span class="category">
            <a href="/categories/<%= page.categories.data[0].name %>">
                <ion-icon name="layers"></ion-icon>
                <%- page.categories.data[0].name %>
            </a>
        </span>
        <% } %>

        <% if(page.tags && page.tags.data.length!=0){ %>

        <span class="tags">
            <span class="tag-icon">
                <ion-icon name="pricetags"></ion-icon>
            </span>
            <% page.tags.data.forEach(function(data){%>
            <span class="tag">
                <% 
                var color = ['color:#ffa2c4', 'color:#00bcd4', 'color:#03a9f4', 'color:#00a596', 'color:#ff7d73'];
                var num = Math.floor(Math.random()*color.length);
                %>
                <a href="/tags/<%= data.name %>" style=<%- color[num] %>>
                    <%- data.name %>
                </a>
            </span>
            <% }) %>
        </span>
        <% } %>
    </div>

    <div class="content">
        <%- page.content %>
    </div>

    <div>
        <% if(theme.gitalk.enable){ %>
        <div id="gitalk-container"></div>
        <script>
            var gitalk = new Gitalk({
                clientID: '<%- theme.gitalk.clientID %>',
                clientSecret: '<%- theme.gitalk.clientSecret %>',
                repo: '<%- theme.gitalk.repo %>',
                owner: '<%- theme.gitalk.owner %>',
                admin: ['<%- theme.gitalk.admin %>'],
                // id: location.pathname,      // Ensure uniqueness and length less than 50
                id: location.pathname,
                distractionFreeMode: false,  // Facebook-like distraction free mode
                pagerDirection: 'last'
            })

            gitalk.render('gitalk-container')
        </script>
        <% } %>
    </div>
</div>