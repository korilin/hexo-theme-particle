<% 
    var pageTitle = config.title+' || '
    if(page.title) pageTitle+=page.title;
    else if(is_category()) pageTitle+=page.category;
    else if(is_tag()) pageTitle+=page.tag;
    else pageTitle+=config.subtitle;
    // console.log(page)
    var layout = "index"
    if(is_home()){
        layout = "index"
    }else if(is_post()){
        layout = "post"
    }else if(is_category() || page.title=="categories"){
        layout = "categories"
    }else if(is_tag() || page.title=="tags"){
        layout = "tags"
    }else if(is_archive() || is_year() || is_month()){
        layout = "archives"
    }else {
        layout = "post"
    }
%>
<!DOCTYPE html>
<html lang="<%- config.language %> ">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= pageTitle %></title>
    <meta name="author" content="<%- config.author %> ">
    <meta name="description" content="<%- config.description %> ">
    <meta name="keywords" content="<%- config.keywords %> ">
    <link rel="icon" href="<%- theme.head_img %> ">
    <script src="/js/vue.js"></script>
    <script src="/js/antd.min.js"></script>
    <link rel="stylesheet" href="/css/antd.min.css">
    <% if(theme.style == "night"){ %>
    <link rel="stylesheet" href="/css/night-theme.css">
    <% }else if(theme.style == "maiden"){ %>
    <link rel="stylesheet" href="/css/maiden-theme.css">
    <% }else{ %>
    <link rel="stylesheet" href="/css/full-theme.css">
    <% } %>
</head>

<body>

    <div id="loading"
        style="height: 100vh; width: 100%; position: fixed;display: flex;z-index: 200; justify-content: space-between;">
        <div id="loadleft" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div id="loadright" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div
            style="position: fixed; height: 100vh; width: 100%;display: flex;justify-content: center;align-items: center;">
            <div id="loadcontent"
                style="width:400px;height:400px;padding:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px#a3ddfb; text-align:center;opacity:1;transition:opacity 0.3s ease-out;">
                <div>
                    <h2>LOADING...</h2>
                    <p>加载过慢请开启缓存(浏览器默认开启)</p>
                    <div>
                        <img src="dancingkitty.gif" alt="loading">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="layout">
        <transition name="into">
            <div v-show="show_page" style="display: none;">
                <div id="menu_show">
                    <%- include("menu") %>
                </div>

                <div id="main">
                    <%- include(layout) %>
                    <%- include("footer") %>
                </div>
            </div>
        </transition>
    </div>

    <script>
        new Vue({
            el: "#layout",
            data: {
                show_page: false,
                onload_menu: false,
                menu_show: false,
                card_top: 100,
            },
            created: function () {
                var that = this
                window.onload = function () {
                    that.show_page = true
                    document.getElementById("loadcontent").style.opacity = 0
                    setTimeout(function () {
                        document.getElementById("loadleft").style.width = 0
                        document.getElementById("loadright").style.width = 0
                    }, 300)
                    setTimeout(function () {
                        document.getElementById("loading").style = "display:none"
                    }, 600)
                }

            },
            mounted: function () {
                var that = this
                window.addEventListener('scroll', function (e) {
                    that.menu_show = false
                })
            },
            methods: {
                home_click: function () {
                    window.scrollTo({
                        top: window.innerHeight - 80,
                        behavior: "smooth",
                    });
                }
            }
        })
    </script>
</body>

</html>